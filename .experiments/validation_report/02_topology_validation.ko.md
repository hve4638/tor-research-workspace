# 토폴로지 검증: 대표성 및 트랜짓 집중도

**검증 테스트**: V1 (토폴로지 대표성), V4 (트랜짓 AS 집중도), V5 (시간적 변동)
**데이터 소스**: `data/v1_topology.json`, `data/v4_transit_concentration.json`, `data/v5_temporal.json`
**플롯**: `plots/v1_degree_distribution.png`, `plots/v5_temporal_churn.png`

---

## 1. V1: 토폴로지 대표성

### 1.1 규모 및 커버리지

시뮬레이터는 전체 인터넷 토폴로지에서 추출한 **727-AS Tor 관련 서브그래프** 위에서 동작한다. 이는 CAIDA의 전체 AS-rank 데이터셋의 약 48,000 AS 중 1.5%에 해당한다. 그러나 이 727개 AS는 무작위 표본이 아니라 Tor 릴레이를 호스팅하는 AS들이며, Tor 대역폭의 압도적 비율을 커버한다:

| 메트릭 | 값 |
|--------|-----|
| 총 AS 노드 | 727 |
| 에지가 있는 노드 | 604 |
| 에지가 없는 노드 | 123 |
| 총 에지 | 6,325 |
| Peer-to-peer 에지 | 5,203 (82.3%) |
| Provider-customer 에지 | 1,122 (17.7%) |
| Guard 대역폭 커버리지 (주요 AS) | 88.1% |
| Exit 대역폭 커버리지 (주요 AS) | 96.8% |

120개 주요 AS(guard 또는 exit 가중치가 0.1% 이상인 AS)가 guard 대역폭의 88.1%와 exit 대역폭의 96.8%를 커버한다. 인터넷 AS의 1.5%만 모델링하면서도 Tor 트래픽의 대부분을 포착할 수 있다.

### 1.2 차수 분포

| 메트릭 | 우리 모델 | CAIDA 참조값 |
|--------|-----------|-------------|
| 평균 차수 | 20.94 | ~6.3 |
| 중앙값 차수 | 6.0 | ~4 |
| 최대 차수 | 385 | ~7,000 |
| 그래프 밀도 | 0.024 | ~0.0001 |
| Power-law alpha | 1.52 | ~2.1 |

모델의 평균 차수(20.94)가 CAIDA 참조값(~6.3)을 초과하는 것은 Tor 호스팅 AS가 무작위 인터넷 AS가 아니라 평균 이상의 피어링을 가진 데이터센터 네트워크와 트랜짓 프로바이더에 집중되어 있기 때문이다. 이는 결함이 아니라 예상된 동작이다.

Power-law 지수(alpha = 1.52 vs CAIDA ~2.1)는 우리 차수 분포에서 더 두꺼운 꼬리를 반영하며, Tor 릴레이가 대형 트랜짓 및 호스팅 네트워크에 집중되어 있음과 일치한다.

### 1.3 타당성에 대한 함의

토폴로지는 **전체 인터넷을 대표하지 않지만**, **Tor 트래픽이 실제로 통과하는 AS 수준 경로를 대표한다**. 우리의 연구 질문이 Tor 회로의 AS 수준 관찰에 관한 것이므로, 이 Tor 중심 서브그래프가 적절한 모델링 선택이다.

**한계**: 서브그래프에 없는 노드 간 AS 경로에서 중간 홉이 누락될 수 있다. BFS 라우팅이 727-노드 그래프에서만 동작하므로 전체 인터넷보다 짧은 경로를 생성한다(V2 참조).

---

## 2. V4: 트랜짓 AS 집중도

### 2.1 지니 계수

AS 수준 위협 점수의 지니 계수는 **0.689**로, 트랜짓 관찰 능력의 **높은 집중도**를 나타낸다. 상위 3개 AS가 전체 트랜짓 위협의 **77.1%**를 차지한다.

### 2.2 Tier-1 AS 존재

8개 표준 Tier-1 트랜짓 프리 클리크 멤버 중 4개가 상위 15개 위협 AS에 포함된다:

| 순위 | ASN | 이름 | 위협 점수 |
|------|-----|------|----------|
| 1 | AS6939 | Hurricane Electric | 1.247% |
| 2 | AS174 | Cogent | 0.864% |
| 3 | AS1299 | Arelion/Telia | 0.259% |
| 6 | AS3356 | Lumen/Level3 | 0.095% |

이는 RAPTOR 논문 Table 2와 일치하며, Tier-1 AS가 트랜짓 위협 순위를 지배함을 보여준다.

### 2.3 스피어만 순위 상관

우리의 Tier-1 순위와 알려진 트랜짓 볼륨 기반 참조 순위 간 스피어만 순위 상관은 rho = -0.8 (p = 0.20)이다. 음의 상관은 Hurricane Electric과 Cogent가 일반적인 트랜짓 볼륨 순위보다 우리 모델에서 더 높은 순위를 차지함을 반영한다.

---

## 3. V5: 시간적 변동

### 3.1 13개 스냅샷의 에지 변동률

13개 월간 CAIDA AS 관계 스냅샷(2025년 1월~2026년 1월)을 분석하여 연속 월간 에지 변동률을 계산했다.

평균 변동률: 월 **9.2%**. 2025년 3-4월(18.0%, 제거 주도)과 2025년 11-12월(21.7%, 추가 주도)에 두 번의 높은 변동 이벤트가 있었다.

### 3.2 관찰률과의 상관

에지 변동률과 AS 수준 상관률 변화 간 피어슨 상관은 **r = 0.512** (p = 0.378)이다. 양의 방향은 RAPTOR 논문의 발견(토폴로지 변화가 관찰 기회를 증가시킴)과 일치하지만, 적은 데이터 포인트(n=5)로 인해 통계적으로 유의하지 않다.

---

## 4. 요약

| 테스트 | 상태 | 핵심 발견 |
|--------|------|----------|
| V1 토폴로지 | PASS | 727 AS가 Tor 대역폭의 88-97% 커버; 예상된 heavy-tail 차수 분포 |
| V4 트랜짓 집중도 | PASS | Gini=0.689; 상위 15에 4/8 Tier-1 AS; RAPTOR Table 2와 일치 |
| V5 시간적 변동 | PASS | 월 평균 9.2% 변동; 양의 상관(r=0.51)이나 비유의 |
