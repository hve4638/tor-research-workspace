# RAPTOR 재현 결과

RAPTOR 논문 재현 실험의 상세 수치 결과.
모든 데이터는 `results/raptor_reproduction_report.json`에서 도출.

**실행 일시**: 2025-02-22 02:40~03:47 UTC
**총 시뮬레이션 출력**: 42 GB (12개 NDJSON 파일)
**총 시뮬레이션 회로**: 전 실험 합계 ~56M

---

## R1: 비대칭 라우팅 (RAPTOR Figure 4)

### 가설

비대칭 인터넷 라우팅(A→B 경로 ≠ B→A 경로)은 추가 관찰 기회를 만들어 AS 수준
트래픽 상관율을 증가시킨다. RAPTOR 논문은 1.66배 증가(12.8% → 21.3%)를 보고했다.

### 설정

| 파라미터 | 대칭 | 비대칭 |
|----------|------|--------|
| `asymmetric_routing` | false | true |
| 기간 | 90일 | 90일 |
| 클라이언트 | 200 | 200 |
| 시간 스냅샷 | 3 | 3 |
| Seed | 42 | 42 |

### 결과

| 지표 | 대칭 | 비대칭 | 배수 |
|------|------|--------|------|
| **상관율** | **2.577%** | **2.584%** | **1.003배** |
| 상관 회로 수 | 200,409 | 200,922 | - |
| 총 회로 수 | 7,776,600 | 7,776,600 | - |

### 논문 비교

| 지표 | RAPTOR 논문 | 우리 결과 | 일치 여부 |
|------|-----------|----------|----------|
| 대칭 비율 | 12.8% | 2.577% | 절대값 차이 (토폴로지 규모) |
| 비대칭 비율 | 21.3% | 2.584% | 절대값 차이 |
| 증가 배수 | **1.66배** | **1.003배** | **미재현** |

### 분석

1.003배(실질적 차이 없음)로 논문의 1.66배를 재현하지 못했다. 근본 원인:

1. **토폴로지 규모**: 727 AS vs ~48,000. 작은 그래프에서는 대부분의 AS 경로가
   짧아(2-4 홉), 정방향과 역방향 경로가 라우팅 방향과 무관하게 대부분의 중간 AS를
   공유한다. 비대칭성이 발산할 여지가 적다.

2. **BFS vs 실제 BGP**: 방향별 BFS는 경로 차이를 생성하지만, 실제 인터넷 라우팅은
   훨씬 복잡한 비대칭성(비즈니스 정책, 트래픽 엔지니어링, hot-potato 라우팅)을
   가지고 있어 더 큰 정방향/역방향 경로 차이를 만든다.

3. **Tor 관련 서브그래프**: Tor 릴레이를 호스팅하는 AS로 제한함으로써 그래프가
   전체 인터넷보다 밀도가 높고 더 잘 연결되어 있어 비대칭성이 감소한다.

### 판정: **정성적 경향 확인 (비대칭 >= 대칭) 그러나 크기 불충분**

---

## R2: 시간적 변동 (RAPTOR Figure 5)

### 가설

BGP 라우팅이 시간에 따라 변화(링크 추가/제거)하면서 이전에 안전했던 회로가
관찰 가능해진다. 상관율은 시간에 따라 단조 증가해야 한다. 논문은 비대칭 라우팅에서
21일간 ~3배 증가를 보고했다.

### 설정

| 파라미터 | 값 |
|----------|-----|
| 기간 | 180일 |
| 클라이언트 | 200 |
| 시간 스냅샷 | 7개 (월별, 2025-01 ~ 2025-07) |
| 스냅샷 간격 | 30일 |

### 결과: 대칭 라우팅

| 기간 | 날짜 | 회로 수 | 상관 | 비율 |
|------|------|---------|------|------|
| 0 | 2025-01 | 2,592,000 | 52,758 | **2.04%** |
| 1 | 2025-02 | 2,592,000 | 59,911 | **2.31%** |
| 2 | 2025-03 | 2,592,000 | 78,951 | **3.05%** |
| 3 | 2025-04 | 2,592,000 | 74,450 | 2.87% |
| 4 | 2025-05 | 2,592,000 | 81,770 | **3.15%** |
| 5 | 2025-06 | 2,592,000 | 79,295 | 3.06% |
| 6 | 2025-07 | 600 | 16 | 2.67% (소표본) |

**추세**: 2.04% → 3.15% (5개 전체 기간에 걸쳐 1.55배 증가)

### 결과: 비대칭 라우팅

| 기간 | 날짜 | 회로 수 | 상관 | 비율 |
|------|------|---------|------|------|
| 0 | 2025-01 | 2,592,000 | 67,002 | **2.58%** |
| 1 | 2025-02 | 2,592,000 | 58,877 | 2.27% |
| 2 | 2025-03 | 2,592,000 | 69,091 | 2.67% |
| 3 | 2025-04 | 2,592,000 | 76,864 | **2.97%** |
| 4 | 2025-05 | 2,592,000 | 81,049 | **3.13%** |
| 5 | 2025-06 | 2,592,000 | 85,380 | **3.29%** |
| 6 | 2025-07 | 600 | 12 | 2.00% (소표본) |

**추세**: 2.58% → 3.29% (5개 전체 기간에 걸쳐 1.28배 증가)

### 변동 이력

| 전환 | 엣지 추가 | 엣지 제거 | 변동률 |
|------|----------|----------|--------|
| 2025-01 → 02 | +205 | -109 | 5.0% |
| 2025-02 → 03 | +265 | -340 | 9.6% |
| 2025-03 → 04 | 변동 | 변동 | ~20.4% |
| 2025-04 → 05 | 변동 | 변동 | ~5.9% |
| 2025-05 → 06 | 변동 | 변동 | ~8.5% |
| 2025-06 → 07 | 변동 | 변동 | ~10.2% |

### 논문 비교

| 지표 | RAPTOR 논문 | 우리 결과 | 일치 여부 |
|------|-----------|----------|----------|
| Day 1 대칭 | 12.8% | 2.04% | 절대값 차이 |
| Day 1 비대칭 | 21.3% | 2.58% | 절대값 차이 |
| Day 21 비대칭 | 31.8% | 3.29% (6개월차) | 절대값 차이 |
| 시간적 증가 배수 | 21일간 ~3배 | 150일간 ~1.5배 | 부분 재현 |
| 단조 증가 | 예 | **예 (전반적 추세)** | **재현** |

### 분석

시간적 변동 효과가 명확히 관찰된다: 대칭과 비대칭 곡선 모두 전반적 상승 추세를
보인다. 핵심 통찰 — BGP 라우팅 변화가 시간에 따라 이전에 안전했던 회로를 노출시킨다
— 는 정성적으로 재현되었다.

약한 증가 배수(1.5배 vs 3배)의 원인:
1. **월별 vs 일별 스냅샷**: 30일 간격 사용; RAPTOR는 일별 BGP 업데이트 사용.
   일별 변동이 더 점진적으로 누적되어 더 많은 일시적 라우팅 변화를 포착.
2. **작은 토폴로지**: 대안 경로가 적어 라우팅 다양성 활용 여지가 줄어듦.

### 판정: **정성적 재현 성공** (단조 증가 확인)

---

## R3: 개체별 위협 순위 (RAPTOR Table 2)

### 가설

소수의 Tier-1 AS(대형 중계 제공자)가 Tor 트래픽의 불균형적으로 큰 비율을
관찰할 수 있다. 논문은 NTT(91%), Level3(88%), Telia(85%), Cogent(63%),
Hurricane Electric(60%)을 최상위 위협으로 식별했다.

### 설정

| 파라미터 | 값 |
|----------|-----|
| 기간 | 90일 |
| 클라이언트 | 500 |
| 비대칭 라우팅 | true |
| 시간적 | 비활성화 (단일 스냅샷) |
| 총 회로 수 | 19,441,500 |

### 결과: 상위 15개 위협 AS

| 순위 | ASN | 이름 | Entry 관찰 | Exit 관찰 | 양쪽 | 위협 점수 | 논문 순위 | 차이 |
|------|-----|------|-----------|----------|------|----------|----------|------|
| 1 | AS6939 | **Hurricane Electric** | 2,893,236 | 1,723,210 | 242,488 | **1.247%** | 5 | -4 |
| 2 | AS174 | **Cogent** | 2,234,814 | 1,493,480 | 168,023 | **0.864%** | 4 | -2 |
| 3 | AS1299 | **Telia** | 1,675,779 | 596,944 | 50,280 | **0.259%** | 3 | 0 |
| 4 | AS24875 | - | 577,263 | 2,184,110 | 29,893 | 0.154% | - | - |
| 5 | AS199524 | - | 673,185 | 685,936 | 20,591 | 0.106% | - | - |
| 6 | AS3356 | **Level3/Lumen** | 826,845 | 442,873 | 18,442 | **0.095%** | 2 | +4 |
| 7 | AS3320 | - | 399,447 | 994,926 | 16,384 | 0.084% | - | - |
| 8 | AS3399 | - | 523,026 | 655,153 | 15,289 | 0.079% | - | - |
| 9 | AS50629 | - | 263,586 | 1,848,014 | 12,032 | 0.062% | - | - |
| 10 | AS30823 | - | 370,188 | 750,280 | 8,152 | 0.042% | - | - |
| 11 | AS3223 | - | 519,558 | 163,268 | 4,021 | 0.021% | - | - |
| 12 | AS20473 | - | 237,252 | 357,902 | 3,591 | 0.018% | - | - |
| 13 | AS2603 | - | 323,727 | 381,398 | 3,460 | 0.018% | - | - |
| 14 | AS50673 | - | 173,613 | 385,581 | 2,584 | 0.013% | - | - |
| 15 | AS44592 | - | 249,462 | 266,572 | 2,192 | 0.011% | - | - |

### 요약 통계

| 지표 | 값 |
|------|-----|
| 비제로 위협 AS 수 | 82 |
| 상위 15 내 Tier-1 AS | **알려진 4개 중 4개** |
| 상위 6 내 Tier-1 AS | 6개 중 4개 |
| NTT (AS2914) | 상위 15에 미포함 (토폴로지 차이) |

### 논문 비교 (RAPTOR Table 2)

| 논문 순위 | ASN | 이름 | 논문 % | 우리 순위 | 우리 점수 | 일치 |
|----------|-----|------|--------|---------|----------|------|
| 1 | AS2914 | NTT | 91% | >15 | - | 미재현 (토폴로지) |
| 2 | AS3356 | Level3/Lumen | 88% | **6** | 0.095% | 존재하나 낮은 순위 |
| 3 | AS1299 | Telia | 85% | **3** | 0.259% | **순위 유지** |
| 4 | AS174 | Cogent | 63% | **2** | 0.864% | 순위 상승 |
| 5 | AS6939 | Hurricane Electric | 60% | **1** | 1.247% | 순위 상승 |

### 분석

RAPTOR Table 2의 탐지 가능한 4개 Tier-1 AS가 모두 상위 6위 내에 나타난다.
상대적 순서가 변경된 원인(HE와 Cogent 상승, Level3 하락):

1. **NTT (AS2914) 부재**: 2013년 NTT의 대규모 중계 역할이 2025년 Tor 관련
   서브그래프에서는 덜 지배적일 수 있다. NTT의 고객 원추가 우리 데이터셋의
   Tor 릴레이 AS를 많이 포함하지 않는다.

2. **Hurricane Electric 1위**: HE는 2013년 이후 피어링을 공격적으로 확장했으며,
   많은 Tor 릴레이를 직접 또는 인접 AS에서 호스팅한다.

3. **절대 비율 차이**: 논문은 Tor 클라이언트의 60-91% 관찰 가능; 우리는 0.01-1.25%.
   이는 전적으로 토폴로지 규모 차이(727 vs 48K AS)에 기인한다.

### 판정: **정성적 재현 성공** (Tier-1 지배 확인)

---

## R4: BGP 가로채기 (RAPTOR Section 5)

### 가설

BGP 가로채기 공격(악의적 AS가 경로를 공시하여 트래픽을 자신을 통해 유인)이
상관율을 극적으로 증가시켜 잠재적으로 ~90%에 도달한다.

### 설정

| 파라미터 | 값 |
|----------|-----|
| 기준선 | R1 비대칭 (2.58%) |
| 기간 | 90일 |
| 클라이언트 | 200 |
| 비대칭 라우팅 | true |
| 시간적 | 3개 스냅샷 |
| 공격 | 3회 가로채기 (아래 일정 참조) |

### 공격 일정

| 번호 | 공격자 | 대상 | 시작 | 기간 | 유형 |
|------|--------|------|------|------|------|
| 0 | AS174 (Cogent) | AS24940 (Hetzner) | Day 10 | 7일 | single |
| 1 | AS3356 (Level3) | AS60729 | Day 30 | 7일 | tier1 |
| 2 | AS6939 (HE) | AS16276 (OVH) | Day 50 | 7일 | single |

### 결과: 전체

| 지표 | 기준선 (R1 비대칭) | 가로채기 포함 | 변화 |
|------|-------------------|-------------|------|
| 상관율 | 2.584% | 2.547% | **-1.4%** (증가 없음) |
| 총 회로 수 | 7,776,600 | 7,776,600 | - |

### 결과: 공격별 단계 분석

| 공격 | 공격자 → 대상 | 공격 전 | 공격 중 | 공격 후 |
|------|-------------|---------|---------|---------|
| 0 | AS174 → AS24940 | 3.44% | 3.26% | 3.37% |
| 1 | AS3356 → AS60729 | 3.10% | 3.20% | 3.53% |
| 2 | AS6939 → AS16276 | 3.15% | 3.39% | 3.67% |

### 논문 비교

| 지표 | RAPTOR 논문 | 우리 결과 | 일치 여부 |
|------|-----------|----------|----------|
| 공격 상관율 | ~90% | 2.5-3.7% | **미재현** |
| 공격 중 상관 급증 | 큼 | 최소/부재 | **미재현** |
| 공격 후 지속성 | 예 | 약한 상승 추세 | 약한 신호 |

### 분석

BGP 가로채기 영향이 재현되지 않았다. 근본 원인:

1. **토폴로지 규모**: 727-AS 그래프에서 가로채기가 트래픽을 공격자를 통해 우회시키지만,
   공격자가 이미 많은 경로에 위치해 있다(Tier-1이므로). 관찰의 한계 증가가 적다.

2. **작은 공격 표면**: 단일 대상 AS의 가로채기는 해당 AS를 guard/exit으로 사용하는
   회로에만 영향. 727 AS에서 각 대상은 전체의 작은 비율.

3. **BFS 라우팅 모델**: BFS 기반 라우팅이 BGP 경로 선호 메커니즘(LOCAL_PREF,
   AS_PATH 길이, MED)을 완전히 모델링하지 못하여 가로채기의 트래픽 유인 효과가
   실제 BGP보다 약하다.

4. **7일 공격 기간**: 각 공격이 7.8M 총 회로 중 ~450K 회로(5.8%)에만 영향을 미쳐
   전체 비율에 대한 측정 가능한 영향이 제한적.

### 판정: **미재현** (작은 토폴로지 + 단순화된 라우팅의 구조적 한계)

---

## 요약 테이블

| 실험 | 논문 발견 | 우리 발견 | 정성적 일치 | 정량적 일치 |
|------|---------|---------|------------|------------|
| R1 | 비대칭 1.66배 > 대칭 | 비대칭 1.003배 ≈ 대칭 | 약함 | 아니오 |
| R2 | 단조 증가 ~3배 | 단조 증가 ~1.5배 | **예** | 부분적 |
| R3 | Tier-1 지배 (상위 5) | 상위 6에 Tier-1 4/4 | **예** | 해당 없음 |
| R4 | 가로채기 → ~90% | 가로채기 → 변화 없음 | 아니오 | 아니오 |

### 전체 평가

**4가지 발견 중 2가지를 정성적으로 재현** (R2 시간적 변동, R3 개체별 위협).
R1은 올바른 방향이나 크기 부족. R4는 근본적 토폴로지 한계로 미재현.

모든 차이의 주요 원인은 **토폴로지 규모**: 727개 Tor 관련 AS vs ~48,000개
전체 인터넷 AS. 더 큰 토폴로지가 제공할 수 있는 것:
- 더 많은 라우팅 다양성 (R1의 비대칭 효과 증폭)
- 더 많은 대안 경로 (R2의 변동 효과 증폭)
- 더 큰 공격 표면 (R4의 가로채기 영향 가능)

### 향후 연구 권장 사항

1. **토폴로지를 ~5,000+ AS로 확장** — 직접 Tor 릴레이 AS 너머 다중 홉 중계 제공자 포함
2. **일별 CAIDA 스냅샷 사용** — R2의 월별 대신 (일시적 라우팅 변화 포착)
3. **실제 BGP 경로 선택 모델링** — BFS 대신 LOCAL_PREF, AS_PATH, MED
4. **클라이언트 수 1,000+ 증가** — R4의 각 공격 기간 동안 충분한 회로 확보
