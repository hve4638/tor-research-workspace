# NEXT.md 피드백 - 추가/명확화 필요 요소

## 🔍 추가/명확화가 필요한 요소

### 1. **연구 목표 구체화**

| 현재 | 개선 제안 |
|------|-----------|
| "tor 시뮬레이션을 통한 연구 완수" | **어떤 연구 질문(Research Question)을 답하려는가?** |

**추가 필요:**
```markdown
## 연구 질문 (Research Questions)
- RQ1: AS-level 글로벌 관찰자가 Tor 트래픽을 얼마나 상관(correlate)할 수 있는가?
- RQ2: 특정 AS 위치 (예: IXP)가 추적 성공률에 얼마나 영향을 주는가?
- RQ3: Hidden Service 트래픽은 일반 트래픽 대비 얼마나 더 추적 가능한가?
```

---

### 2. **"현실성" 기준 정의**

현재: "현실성을 높인다"고 했지만 **무엇을 기준으로 검증할지** 불명확

**추가 필요:**
```markdown
## 현실성 검증 기준 (Validation Criteria)
- [ ] Tor Metrics 통계와의 비교 (릴레이 수, 대역폭 분포, 지역 분포)
- [ ] 실제 Tor 클라이언트 트래픽 패턴과 시뮬레이션 패턴 비교
- [ ] 관련 논문의 측정 결과와 비교 (Johnson et al. 2013 등)
```

---

### 3. **AS-level 관측의 구체적 정의**

현재: "AS-level 단위 관측을 추가"

**추가 필요:**
```markdown
## AS-level 관측 정의
- 관측 지점: Guard AS, Exit AS, IXP, 중간 경로 AS
- 관측 데이터: 타이밍(timestamp), 패킷 방향, 패킷 크기, 회로 ID(암호화됨)
- 관측 모델: 
  - Passive observer (패킷 메타데이터만)
  - Active observer (패킷 주입/수정 가능)
```

---

### 4. **ref-tor 역공학 결과 활용 계획**

이미 18개 역공학 문서가 있는데, **어떤 파라미터를 적용할지** 명시 필요

**추가 필요:**
```markdown
## 적용할 역공학 파라미터
- 노드 선택: 가중치 매트릭스 (Wgg, Wgm, Wee)
- Guard 관리: 샘플 크기 (60-200), 수명 (30-60일)
- 타이밍: CBT Pareto 분포, MaxCircuitDirtiness (10분)
- HS: IP 3-20개, HSDir 6개, 24시간 주기
- (참조: ref-tor/reverse-engineer/00_final_report.md)
```

---

### 5. **단순화 범위의 명확한 경계**

현재: "암호화 단순화", "패킷 전달 단순화"

**추가 필요:**
```markdown
## 단순화 범위 (In-Scope Simplifications)
| 요소 | 실제 Tor | next-simulate |
|------|----------|---------------|
| 암호화 | AES-CTR + ntor | 생략 (plaintext) |
| 패킷 크기 | 고정 512 bytes | size 필드만 유지 |
| 네트워크 전송 | TCP/TLS | 이벤트 기반 메시지 전달 |
| 디렉토리 합의 | 1시간마다 갱신 | 정적 또는 설정 기반 |

## 유지해야 할 핵심 (Must Keep)
| 요소 | 이유 |
|------|------|
| 패킷 셀 구조 (512 bytes) | 트래픽 핑거프린팅 시그니처 |
| 타이밍 분포 (CBT, 지연) | 상관 분석의 핵심 |
| 3홉 경로 구조 | Tor 기본 아키텍처 |
| Guard 선택 확률 | 관측 확률에 직접 영향 |
```

---

### 6. **산출물 정의**

**추가 필요:**
```markdown
## 예상 산출물
1. **시뮬레이션 엔진 (next-simulate)**
   - Go 또는 Rust 기반
   - 설정 기반 시나리오 실행
   
2. **로그 출력**
   - AS-level 관측 로그 (Observer가 볼 수 있는 것만)
   - 그라운드 트루스 로그 (실제 회로 매핑, 분석용)

3. **분석 도구**
   - 추적 성공률 계산기
   - 시나리오별 비교 리포트
```

---

### 7. **일정/마일스톤**

**추가 필요:**
```markdown
## 마일스톤
| 단계 | 목표 | 예상 기간 |
|------|------|-----------|
| M1 | 아키텍처 설계 + 핵심 타입 정의 | 1주 |
| M2 | Directory/Guard 선택 구현 | 2주 |
| M3 | 회로 생성 + 패킷 전달 | 2주 |
| M4 | Hidden Service 지원 | 2주 |
| M5 | AS-level 관측 로직 | 1주 |
| M6 | 검증 + 분석 | 2주 |
```

---

### 8. **기존 코드 재사용 계획**

**추가 필요:**
```markdown
## 기존 자산 활용
| 자산 | 활용 방법 |
|------|-----------|
| onion-simulate | 이벤트 큐, 지역 시스템 참조 |
| ref-tor/reverse-engineer | 파라미터 + 알고리즘 적용 |
| ref-tor/pipeline | AS 데이터 (as_sets.json, as_roles.json) |
| onion-simulate-visualize | 로그 형식 호환성 유지 → 재사용 |
```

---

## ✅ 요약: NEXT.md 보강 체크리스트

| 항목 | 현재 상태 | 필요한 추가 |
|------|-----------|-------------|
| 연구 질문 | ❌ 없음 | RQ1, RQ2, RQ3 정의 |
| 현실성 검증 기준 | ❌ 없음 | Tor Metrics, 논문 비교 기준 |
| AS-level 관측 정의 | 모호함 | 관측 지점, 데이터, 모델 명시 |
| 역공학 파라미터 활용 | ❌ 없음 | 적용할 파라미터 목록 |
| 단순화 경계 | 목록만 있음 | 상세 비교표 + 유지 항목 |
| 산출물 정의 | ❌ 없음 | 엔진, 로그, 분석 도구 |
| 일정/마일스톤 | ❌ 없음 | 단계별 목표 + 기간 |
| 기존 코드 재사용 | ❌ 없음 | 자산별 활용 계획 |

---

## 💡 다음 단계 제안

1. **NEXT.md 업데이트**: 위 항목들을 반영하여 재작성
2. **우선순위 결정**: 어떤 RQ를 먼저 답할 것인가?
3. **아키텍처 문서 작성**: next-simulate의 설계 문서 (ARCHITECTURE.md)
4. **프로토타입 시작**: M1 단계 착수
